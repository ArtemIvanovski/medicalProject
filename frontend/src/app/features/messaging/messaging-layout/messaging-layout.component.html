<div class="messaging-container">
    <div class="row h-100 g-0">
        <div class="col-lg-4 col-md-5 chat-list-column" [class.d-none]="activeChat && isMobile">
            <app-chat-list
                    [chats]="chats"
                    [activeChat]="activeChat"
                    [isLoading]="isLoading"
                    (chatSelected)="onChatSelected($event)"
                    (newChat)="onNewChat()">
            </app-chat-list>
        </div>

        <div class="col-lg-8 col-md-7 chat-window-column" [class.d-none]="!activeChat && isMobile">
            <div class="mobile-header d-md-none" *ngIf="activeChat">
                <button class="btn btn-link" (click)="onBackToChats()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <span>{{ activeChat.companion.full_name }}</span>
            </div>

            <app-chat-window
                    [chat]="activeChat"
                    *ngIf="activeChat">
            </app-chat-window>

            <div class="empty-chat-state" *ngIf="!activeChat">
                <div class="text-center">
                    <i class="fas fa-comments fa-4x text-muted mb-3"></i>
                    <h4 class="text-muted">Выберите чат для начала общения</h4>
                    <p class="text-muted">Выберите существующий чат или создайте новый</p>
                    <button class="btn btn-primary" (click)="onNewChat()">
                        <i class="fas fa-plus me-2"></i>
                        Создать новый чат
                    </button>
                </div>
            </div>
        </div>
    </div>

    <app-contact-selection-modal
            (contactSelected)="onContactSelected($event)">
    </app-contact-selection-modal>
</div>